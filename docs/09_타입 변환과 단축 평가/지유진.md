## 🔖 9장 - 타입 변환과 단축 평가

| 페이지   | 내용                                                            |
|-------|---------------------------------------------------------------|
| p.109 | 동료가 작서한 코드를 정확히 이해할 수 있어야 하고 자신이 작성한 코드도 동료가 쉽게 이해할 수 있어야 한다. |

## 9.1 타입 변환이란?

📌 개발자가 의도적으로 값의 타입을 변환하는 것을 **명시적 타입 변환<sup>explicit coercion</sup>** 또는
**타입 캐스팅<sup>type casting</sup>** 이라 한다.



📌 **암묵적 타입 변환<sup>implicit coercion</sup>** 또는 **타입 강제 변환<sup>type coercion</sup>** 은
개발자의 의도와는 상관없이 표현식을 평가하는 도중에 자바스크립트 엔진에 의해 암묵적으로 타입이 자동으로 변환되기도 하는 것이다.

```javascript
var x = 10;

// 명시적 타입 변환
// 숫자를 문자열로 타입 캐스팅한다.
var str = x.toString();
console.log(typeof str, str); // string 10

// 암묵적 타입 변환
// 문자열 연결 연산자는 숫자 타입 x의 값을 바탕으로 새로운 문자열을 생성한다.
var str = x + '';
console.log(typeof str, str); // string 10

// 두 경우 모두 x 변수의 값이 변경된 것은 아니다.
console.log(typeof x, x);     // number 10
```

> 원시 값은 변경 불가능한 값<sup>immutable value</sup>이므로 변경할 수 없다.

- 암묵적 타입 변환

    ```
    자바스크립트 엔진은 표현식을 에러 없이 평가하기 위해 피연산자의 값을 암묵적 타입 변환해 새로운 타입의 값을 만들어 단 한 번 사용하고 버린다.
    ```

- 명시적 타입 변환
    ```
    타입을 변경하겠다는 개발자의 의지가 코드에 명확히 드러나긴 하지만, 암묵적 타입 강제 변환은 자바스크립트 엔진에 의해 암묵적으로,
    즉 드러나지 않게 타입이 자동 변환되기 때문에 타입을 변경하겠다는 개발자의 의지가 코드에 명백히 드러나지 않는다.
    ```

## 9.2 암묵적 타입 변환

📌 암묵적 타입 변환이 발생하면 문자열, 숫자, 불리언과 같은 원시 타입 중 하나로 타입을 자동 변환한다.

### 9.2.1 문자열 타입으로 변환

```javascript
1 + '2' // '12'
```

📌 + 연산자는 **피연산자** 중 하나 이상이 문자열이므로 문자열 연결 연산자로 동작한다.

> 문자열 연결 연산자의 역할은 문자열 값을 만드는 것이다.

### 9.2.2 숫자 타입으로 변환

```javascript
1 - '1'   // 0
1 * '10'  // 10
1 / 'one' // NaN
```

📌 자바스크립트 엔진은 **산술 연산자** 표현식을 평가하기 위해 산술 연산자의 피연산자 중에서
숫자 타입이 아닌 피연산자를 숫자 타입으로 암묵적 타입 변환한다.

> 이때 피연산자를 숫자 타입으로 변환할 수 없는 경우는 산술 연산을 수행할 수 없으므로 표현식의 평가 결과는 NaN이 된다.

🧐 피연산자를 숫자 타입으로 변환해야 할 문맥은 산술 연산자뿐만이 아니다.

```javascript
'1' > 0   // true
```

> 🔍 비교 연산자의 역할은 불리언 값을 만드는 것이다.

📌 자바스크립트 엔진은 **비교 연산자** 표현식을 평가하기 위해 비교 연산자의 피연산자 중에서 숫자 타입이 아닌 피연산자를 숫자 타입으로 암묵적 타입 변환한다.

❓ 숫자 타입으로 바뀌지 않는 문자열의 경우는 어떨까?

```javascript
'a' > 0     // false
Number('a') // NaN
```

📌 **+ 단항 연산자**는 피연산자가 숫자 타입의 값이 아니면 숫자 타입의 값으로 암묵적 타입 변환을 수행한다.

```javascript
+''       // 0
+'0'      // 0
+'1'      // 1
+'string' // NaN
```

⚠️ 빈 문자열(''), 빈 매열([]), null, false는 0으로, true는 1로 변환된다.
객체와 빈 배열이 아닌 배열, undefined는 변환되지 않아 NaN이 된다는 것에 주의하자.

### 9.2.3 불리언 타입으로 변환

📌 자바스크립트 엔진은 **조건식**의 평가 결과를 불리언 타입으로 암묵적 타입 변환한다.

```javascript
if ('')     console.log('1');
if (true)   console.log('2');
if (0)      console.log('3');
if ('str')  console.log('4');
if (null)   console.log('5');

// 2 4
```

이때 **자바스크립트 엔진은 불리언 타입이 아닌 값을 Truthy 값(참으로 평가되는 값) 또는 Falsy 값(거짓으로 평가되는 값)으로 구분한다.**

> 즉, 제어문의 조건식과 같이 불리언 값으로 평가되어야 할 문맥에서 Truthy 값은 true로, Falsy 값은 false로 암묵적 타입 변환된다.

✏️ false로 평가되는 Falsy 값들

- false, undefined, null, 0, -0, NaN, ''(빈 문자열)

> Falsy 값 외의 모든 값은 true로 평가되는 Truthy 값이다.

