## 🔖 4장 - 변수

### 4.1 변수란 무엇인가? 왜 필요한가?

> 변수는 프로그래밍 언어에서 데이터를 관리하기 위한 핵심 개념이다.

#### 🤔 변수는 왜 필요한가?

```javascript
10 + 20
```

먼저, 컴퓨터는 `CPU`를 사용해 **연산**하고, [`메모리`](#info)를 사용해 데이터를 **기억**한다.

위 예제의 숫자 값 `10`과 `20`은 메모리 상의 임의의 **위치**(메모리 주소)에 **기억**(저장)되고 `CPU`는 이 값을 읽어들여 **연산**을 수행한다.
연산 결과로 생성된 숫자 값 `30`도 메모리 상의 임의의 위치에 **저장**된다.

**하지만 `CPU`가 연산해서 만들어낸 숫자 값 `30`을 재사용할 수 없다.**

~~숫자 값 30이 저장된 메모리 공간에 직접 접근하면 안되나?~~

> **안된다.**
> 
> 메모리 주소를 통해 값에 집적 접근하는 것은 치명적 오류를 발생시킬 가능성이 높은 매우 위험한 일이고,
> 자바스크립트는 개발자의 직접적인 메모리 제어를 **허용하지 않는다.**

기억하고 싶은 값을 메모리에 저장하고, 저장된 값을 읽어 들여 재사용하기 위해 **변수**가 필요하다.

#### 🤔 변수란?

📌 **변수**<sup>**variable**</sup>는 하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름을 말한다.
> 쉽게는 값의 위치를 가리키는 상징적인 이름

```javascript
var result = 10 + 20;
```
> 10 + 20은 연산을 통해 30을 생성하고, 그 값은 메모리 공간에 저장된다.
> 이 때 저장된 값 30을 다시 읽어 들여 **재사용**할 수 있도록 값이 저장된 메모리 공간에 상징적인 이름을 붙인 것이 바로 **변수**다.

---

### 4.2 식별자

📌 **식별자**<sup>**identifier**</sup>는 어떤 값을 구별해서 식별할 수 있는 고유한 이름을 말한다.
> 변수 이름을 식별자라고도 한다.
> 
> 식별자는 메모리 주소에 붙인 이름이라고 할 수 있다.

---

### 4.3 변수 선언

📌 **변수 선언**<sup>**variable declaration**</sup>이란 변수를 생성하는 것을 말한다.
> 좀 더 자세히 말하면 값을 저장하기 위한 메모리 공간을 확보<sup>allocate</sup>하고
> 변수 이름과 확보된 메모리 공간의 주소를 연결<sup>name binding</sup>해서 값을 저장할 수 있게 준비하는 것

```javascript
var score;
```
> var [키워드](#info)는 뒤에 오는 변수 이름으로 새로운 변수를 선언할 것을 지시하는 키워드다.

자바스크립트 엔진의 변수 선언

* 선언 단계: 변수 이름을 등록해서 자바스크립트 엔진에 변수의 존재를 알린다.
* [초기화](#info) 단계: 값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 [undefined](#info)를 할당해 초기화한다.

선언하지 않은 식별자에 접근하면 [**ReferenceError**(참조 에러)](#info)가 발생한다.

---

### 4.4 변수 선언의 실행 시점과 변수 호이스팅

```javascript
console.log(score); // undefined

var score;  // 변수 선언문 
```

**자바스크립트 코드는 인터프리터에 의해 한 줄씩 순차적으로 실행**된다.
`console.log(score);`가 실행되는 시점에 아직 `score` 변수의 선언이 실행되지 않았음에도
참조 에러<sup>ReferenceError</sup>가 발생하지 않고 `undefined`가 출력된다.

그 이유는 **변수 선언이 런타임<sup>runtime</sup>이 아니라 그 이전 단계에서 먼저 실행되기 때문**이다.

📌 **변수 호이스팅**<sup>**variable hoisting**</sup>이란
변수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징이다.
> 모든 식별자(변수, 함수, 클래스 등)는 호이스팅된다.

---

### 4.5 값의 할당

📌 변수에 값을 할당<sup>assignment</sup>(대입, 저장)할 때는 할당 연산자 `=`를 사용한다.

```javascript
var score;  // 변수 선언
score = 80; // 값의 할당
```

변수 선언과 값의 할당은 하나의 문<sup>statement</sup>으로 단축 표현할 수도 있다.

```javascript
var score = 80;
```

자바스크립트 엔진은 변수 선언과 값의 할당을 하나의 문으로 단축 표현해도
변수 선언과 값의 할당을 2개의 문으로 나누어 각각 실행한다.

**변수 선언**은 런타임 이전에 먼저 실행되지만
**값의 할당**은 런타임에 실행된다.

```javascript
console.log(score); // undefined

var score;  // 1. 변수 선언
score = 80; // 2. 값의 할당

console.log(score); // 80
```

변수에 값을 할당할 때는 이전 값 `undefined`가 저장되어 있던 메모리 공간을 지우고
그 메모리 공간에 할당 값 `80`을 새롭게 저장하는 것이 아니라
새로운 메모리 공간을 확보하고 그곳에 할당 값 `80`을 저장한다는 점을 주의하자!

---

### 4.6 값의 재할당

```javascript
var score = 80; // 변수 선언과 값의 할당
score = 90;     // 값의 재할당
```

> var 키워드로 선언한 변수는 값을 [재할당](#info)할 수 있다.

위 코드에서 현재 `score` 변수의 값은 `90`이다. `score` 변수의 이전 값인 `undefined`와 `80`은 어떤 식별자와도 연결되어 있지 않다.
이러한 불필요한 값들은 [가비지 콜렉터](#info)에 의해 메모리에서 자동 해제된다.
> 단, 메모리에서 언제 해제될지는 예측할 수 없다.

---

<a id="info"></a>
### 📝 개념 정리

| 단어                                      | 설명                                                                                                                                                                                     |
|-----------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **메모리<sup>memory</sup>**                | 데이터를 저장할 수 있는 메모리 셀<sup>memory cell</sup>의 집합체다.                                                                                                                                       |
| **변수 이름**(또는 변수명)                       | 메모리 공간에 저장된 값을 식별할 수 있는 고유한 이름이다.                                                                                                                                                      |
| **변수 값**                                | 변수에 저장된 값이다.                                                                                                                                                                           |
| **할당<sup>assignment</sup>**(대입, 저장)     | 변수에 값을 저장하는 것이다.                                                                                                                                                                       |
| **참조<sup>reference</sup>**              | 변수에 저장된 값을 읽어 들이는 것이다.                                                                                                                                                                 |
| **키워드<sup>keyword</sup>**               | 자바스크립트 코드를 해석하고 실행하는 자바스크립트 엔진이 수행할 동작을 규정한 일종의 명령어다.                                                                                                                                  |
| **undefined**                           | 자바스크립트에서 제공하는 원시 타입의 값<sup>primitive value</sup>이다.                                                                                                                                    |
| **초기화<sup>initialization</sup>**        | 변수가 선언된 이후 최초로 값을 할당하는 것을 말한다.                                                                                                                                                         |
| **실행 컨텍스트<sup>execution context</sup>** | 자바스크립트 엔진이 소스코드를 평가하고 실행하기 위해 환경을 제공하고 코드의 실행결과를 실제로 관리하는 영역이다.                                                                                                                        |
| **ReferenceError**                      | 식별자를 통해 값을 참조하려 했지만 자바스크립트 엔진이 등록된 식별자를 찾으 수 없을 때 발생하는 에러다.                                                                                                                            |
| **재할당**                                 | 현재 변수에 저장된 값을 버리고 새로운 값을 저장하는 것이다.                                                                                                                                                     |
| **상수<sup>constant</sup>**               | 한번 정해지면 변하지 않는 값이다.즉, 단 한 번만 할당할 수 있는 변수다.                                                                                                                                             |
| **가비지 콜렉터<sup>garbage collector</sup>** | 애플리케이션이 할당<sup>allocate</sup>한 메모리 공간을 주기적으로 검사하여 더 이상 사용되지 않는 메모리를 해제<sup>release</sup>하는 기능을 말한다. 자바스크립트는 가비지 콜렉터를 내장하고 있는 매니지드 언어로서 가비지 콜렉터를 통해 메모리 누수<sup>memory leak</sup>를 방지한다. |
